
#include <stdio.h>
#include <stdlib.h>

//Claves: a=101, b=28.

int main()
{
	int funcion[256] = {28, 129, 230, 75, 176, 21, 122, 223, 68, 169, 14, 115, 216, 61, 162, 7, 108, 209, 54, 155, 0, 101, 202, 47, 148, 249, 94, 195, 40, 141, 242, 87, 188, 33, 134, 235, 80, 181, 26, 127, 228, 73, 174, 19, 120, 221, 66, 167, 12, 113, 214, 59, 160, 5, 106, 207, 52, 153, 254, 99, 200, 45, 146, 247, 92, 193, 38, 139, 240, 85, 186, 31, 132, 233, 78, 179, 24, 125, 226, 71, 172, 17, 118, 219, 64, 165, 10, 111, 212, 57, 158, 3, 104, 205, 50, 151, 252, 97, 198, 43, 144, 245, 90, 191, 36, 137, 238, 83, 184, 29, 130, 231, 76, 177, 22, 123, 224, 69, 170, 15, 116, 217, 62, 163, 8, 109, 210, 55, 156, 1, 102, 203, 48, 149, 250, 95, 196, 41, 142, 243, 88, 189, 34, 135, 236, 81, 182, 27, 128, 229, 74, 175, 20, 121, 222, 67, 168, 13, 114, 215, 60, 161, 6, 107, 208, 53, 154, 255, 100, 201, 46, 147, 248, 93, 194, 39, 140, 241, 86, 187, 32, 133, 234, 79, 180, 25, 126, 227, 72, 173, 18, 119, 220, 65, 166, 11, 112, 213, 58, 159, 4, 105, 206, 51, 152, 253, 98, 199, 44, 145, 246, 91, 192, 37, 138, 239, 84, 185, 30, 131, 232, 77, 178, 23, 124, 225, 70, 171, 16, 117, 218, 63, 164, 9, 110, 211, 56, 157, 2, 103, 204, 49, 150, 251, 96, 197, 42, 143, 244, 89, 190, 35, 136, 237, 82, 183};

	int inversa[256] = {20, 129, 238, 91, 200, 53, 162, 15, 124, 233, 86, 195, 48, 157, 10, 119, 228, 81, 190, 43, 152, 5, 114, 223, 76, 185, 38, 147, 0, 109, 218, 71, 180, 33, 142, 251, 104, 213, 66, 175, 28, 137, 246, 99, 208, 61, 170, 23, 132, 241, 94, 203, 56, 165, 18, 127, 236, 89, 198, 51, 160, 13, 122, 231, 84, 193, 46, 155, 8, 117, 226, 79, 188, 41, 150, 3, 112, 221, 74, 183, 36, 145, 254, 107, 216, 69, 178, 31, 140, 249, 102, 211, 64, 173, 26, 135, 244, 97, 206, 59, 168, 21, 130, 239, 92, 201, 54, 163, 16, 125, 234, 87, 196, 49, 158, 11, 120, 229, 82, 191, 44, 153, 6, 115, 224, 77, 186, 39, 148, 1, 110, 219, 72, 181, 34, 143, 252, 105, 214, 67, 176, 29, 138, 247, 100, 209, 62, 171, 24, 133, 242, 95, 204, 57, 166, 19, 128, 237, 90, 199, 52, 161, 14, 123, 232, 85, 194, 47, 156, 9, 118, 227, 80, 189, 42, 151, 4, 113, 222, 75, 184, 37, 146, 255, 108, 217, 70, 179, 32, 141, 250, 103, 212, 65, 174, 27, 136, 245, 98, 207, 60, 169, 22, 131, 240, 93, 202, 55, 164, 17, 126, 235, 88, 197, 50, 159, 12, 121, 230, 83, 192, 45, 154, 7, 116, 225, 78, 187, 40, 149, 2, 111, 220, 73, 182, 35, 144, 253, 106, 215, 68, 177, 30, 139, 248, 101, 210, 63, 172, 25, 134, 243, 96, 205, 58, 167};

	FILE *archivo;
	FILE *salida;
	unsigned char caracter;  //normal
	unsigned char caracter2; //cifrado
	int cast;
	
	archivo = fopen("archivos/c1","r");
	salida = fopen("archivos/cancion_1.mp3","w");

	printf("\nArchivo abierto\n");

	if (archivo == NULL)
  {
      printf("\nError de apertura del archivo. \n\n");
  }
  else
  {
     	long i;
     	for(i=0;i<808750;i++){
   		    caracter = fgetc(archivo); //Leo el caracter
   		    cast = (int)caracter; //Lo transformo en int
   		    caracter2 = (char)inversa[cast]; //Aplica funciÃ³n inversa y lo transforma en char
   		    fputc(caracter2,salida); //Escribe el caracter resultante en el archivo de salida
     	}
  }

  fclose(archivo);
  fclose(salida);

	return 0;
}
